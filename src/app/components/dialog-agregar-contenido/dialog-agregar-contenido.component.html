<h2 mat-dialog-title>Agregar Contenido</h2>

<mat-dialog-content>
  <!-- Si no hay tipo seleccionado, mostrar opciones -->
  <div *ngIf="!tipoSeleccionado" class="opciones-container">
    <p class="mb-6 text-gray-600">Selecciona el tipo de contenido que deseas agregar:</p>

    <div class="opciones-grid">
      <!-- OpciÃ³n Excel -->
      <button mat-raised-button (click)="seleccionarTipo('excel')" class="opcion-button opcion-excel">
        <div class="opcion-icon">ğŸ“Š</div>
        <div class="opcion-titulo">Archivo Excel</div>
      </button>

      <!-- OpciÃ³n ImÃ¡genes -->
      <button mat-raised-button (click)="seleccionarTipo('imagenes')" class="opcion-button opcion-imagenes">
        <div class="opcion-icon">ğŸ–¼ï¸</div>
        <div class="opcion-titulo">ImÃ¡genes</div>
      </button>

      <!-- OpciÃ³n Collage -->
      <button mat-raised-button (click)="seleccionarTipo('collage')" class="opcion-button opcion-collage">
        <div class="opcion-icon">ğŸ¨</div>
        <div class="opcion-titulo">Crear Collage</div>
      </button>

      <!-- OpciÃ³n Texto -->
      <button mat-raised-button (click)="seleccionarTipo('texto')" class="opcion-button opcion-texto">
        <div class="opcion-icon">ğŸ“</div>
        <div class="opcion-titulo">Tarjeta de Texto</div>
      </button>
    </div>
  </div>

  <!-- Formulario para tarjeta de texto -->
  <div *ngIf="tipoSeleccionado === 'texto'" class="formulario-texto">
    <p class="mb-4 text-gray-600">Crea una nueva tarjeta de texto:</p>

    <mat-form-field appearance="outline" class="w-full mb-4">
      <mat-label>TÃ­tulo</mat-label>
      <input matInput [(ngModel)]="tituloTexto" 
             placeholder="Ingrese el tÃ­tulo de la tarjeta"
             autofocus>
    </mat-form-field>

    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Contenido</mat-label>
      <textarea matInput [(ngModel)]="contenidoTexto" 
                placeholder="Ingrese el contenido de texto"
                rows="6"></textarea>
    </mat-form-field>
  </div>

  <!-- Zona de carga para Excel -->
  <div *ngIf="tipoSeleccionado === 'excel'" class="carga-archivo">
    <p class="mb-4 text-gray-600">Selecciona un archivo Excel:</p>
    <label class="flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-blue-500 rounded-lg cursor-pointer hover:border-blue-600 hover:bg-blue-50 transition-colors">
      <span class="text-center">
        <span class="text-4xl">ğŸ“Š</span>
        <p class="text-sm font-medium text-blue-600 mt-2">Haz clic para seleccionar o arrastra un archivo</p>
        <p class="text-xs text-blue-500 mt-1">(.xlsx, .xls)</p>
      </span>
      <input type="file" 
             accept=".xlsx,.xls" 
             (change)="onExcelSelected($event)"
             class="hidden">
    </label>
  </div>

  <!-- Zona de carga para ImÃ¡genes -->
  <div *ngIf="tipoSeleccionado === 'imagenes'" class="carga-archivo">
    <p class="mb-4 text-gray-600">Selecciona una o mÃ¡s imÃ¡genes:</p>
    <label class="flex items-center justify-center w-full px-6 py-8 border-2 border-dashed border-purple-500 rounded-lg cursor-pointer hover:border-purple-600 hover:bg-purple-50 transition-colors">
      <span class="text-center">
        <span class="text-4xl">ğŸ–¼ï¸</span>
        <p class="text-sm font-medium text-purple-600 mt-2">Haz clic para seleccionar o arrastra imÃ¡genes</p>
        <p class="text-xs text-purple-500 mt-1">Puedes seleccionar mÃºltiples archivos</p>
      </span>
      <input type="file" 
             accept="image/*" 
             multiple
             (change)="onImagenesSelected($event)"
             class="hidden">
    </label>
  </div>

  <!-- OpciÃ³n para crear collage -->
  <div *ngIf="tipoSeleccionado === 'collage'" class="collage-info">
    <p class="text-gray-600">Se abrirÃ¡ el diÃ¡logo para crear un collage con tus imÃ¡genes.</p>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancelar</button>

  <!-- Botones especÃ­ficos para texto -->
  <button *ngIf="tipoSeleccionado === 'texto'" 
          mat-raised-button 
          color="primary"
          [disabled]="!tituloTexto.trim()"
          (click)="onConfirmarTexto()">
    Crear Tarjeta
  </button>

  <!-- BotÃ³n de atrÃ¡s para otros tipos -->
  <button *ngIf="tipoSeleccionado && tipoSeleccionado !== 'texto'" 
          mat-button 
          (click)="tipoSeleccionado = null">
    AtrÃ¡s
  </button>

  <!-- BotÃ³n para collage -->
  <button *ngIf="tipoSeleccionado === 'collage'" 
          mat-raised-button 
          color="primary"
          (click)="onCrearCollage()">
    Crear Collage
  </button>
</mat-dialog-actions>
